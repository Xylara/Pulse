<div class="sidebar group fixed left-0 top-0 h-full w-14 bg-gray-900 flex flex-col items-center py-4 overflow-y-auto overflow-x-hidden border-r border-gray-700 transition-all duration-200 hover:w-52">
  <div class="flex flex-col items-center gap-4 pt-4 w-full">
    <div class="server-item active w-full mx-auto p-2 rounded-md flex items-center hover:bg-gray-700 cursor-pointer group/item" onclick="window.location.href='/'">
      <img src="/others/pulse.png" alt="Server Icon" class="w-8 h-8 rounded-full mr-2" />
      <span class="text-gray-300 font-medium group-hover:opacity-100 transition-all duration-200 opacity-0 group-hover:w-auto w-0 text-ellipsis whitespace-nowrap">Home</span>
    </div>
    <div class="server-item w-full mx-auto p-2 rounded-md flex items-center hover:bg-gray-700 cursor-pointer group/item" onclick="window.location.href='/account'">
      <img src="<%= user.profilepicture %>" alt="User Profile" class="w-8 h-8 rounded-full mr-2" />
      <span class="text-gray-300 font-medium group-hover:opacity-100 transition-all duration-200 opacity-0 group-hover:w-auto w-0 text-ellipsis whitespace-nowrap">Account</span>
    </div>
    <div class="w-full h-px bg-gray-700 my-4"></div>

    <% if (user && user.friends && user.friends.length > 0) { %>
      <% user.friends.forEach(friendUsername => { %>
        <% const friend = users.find(u => u.username === friendUsername); %>
        <% if (friend) { %>
          <div class="server-item w-full mx-auto p-2 rounded-md flex items-center hover:bg-gray-700 cursor-pointer group/item" onclick="window.location.href='/dm/<%= friend.id %>'">
            <img src="<%= friend.profilepicture %>" alt="<%= friend.username %> Profile" class="w-8 h-8 rounded-full mr-2" />
            <span class="text-gray-300 font-medium group-hover:opacity-100 transition-all duration-200 opacity-0 group-hover:w-auto w-0 text-ellipsis whitespace-nowrap"><%= friend.username %></span>
          </div>
        <% } %>
      <% }) %>
    <% } %>
  </div>
</div>

<style>
  body::-webkit-scrollbar {
    width: 4px;
  }
  
  body::-webkit-scrollbar-track {
    background: #1e1e1e;
  }
  
  body::-webkit-scrollbar-thumb {
    background: #7289da;
  }
  
  body::-webkit-scrollbar-thumb:hover {
    background: #6372e9;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const activeItem = document.querySelector('.server-item.active');
    if (activeItem) {
      document.querySelector('.sidebar').classList.add('expanded');
    }
  });
</script>